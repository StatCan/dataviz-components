!function(a){var b={margin:{top:10,right:10,bottom:30,left:50},aspectRatio:16/9,x:{ticks:5},y:{ticks:10,totalProperty:"total",getTotal:function(a,b,c){var d,e,f=this;if(!a[f.y.totalProperty]){e=f.z.getKeys.call(f,c),d=0;for(var g=0;g<e.length;g++)d+=f.y.getValue.call(f,a,e[g],c);a[f.y.totalProperty]=d}return a[f.y.totalProperty]}},width:600};this.areaChart=function(c,d){var e,f,g,h,i=a(!0,{},b,d),j=i.width,k=Math.ceil(j/i.aspectRatio),l=i.innerHeight=k-i.margin.top-i.margin.bottom,m=i.innerWidth=j-i.margin.left-i.margin.right,n=c.select("g"),o=n.select(".data"),p=d3.area().x(function(a){return e(i.x.getValue(a.data))}).y0(function(a){return f(a[0])}).y1(function(a){return f(a[1])}),q=d3.stack(),r=d3.transition().duration(1e3),s=function(){var a,b,c,h=this.settings,j=h.filterData&&"function"==typeof h.filterData?h.filterData.call(h,h.data):h.data,k=n.select(".x.axis"),s=n.select(".y.axis"),t=m-6,u=function(a){return f((a[a.length-1][0]+a[a.length-1][1])/2)},v=h.z.getKeys.call(h,j),w=function(a,b){var c="area area"+(b+1);return h.z&&h.z.getClass&&"function"==typeof h.z.getClass&&(c+=" "+h.z.getClass.call(h,a)),c};e=g.x=function(){return d3.scaleTime()}().range([0,m]),f=g.y=d3.scaleLinear().range([l,0]),e.domain(d3.extent(j,h.x.getValue.bind(h))),f.domain([0,d3.max(j,h.y.getTotal.bind(h))]),a=q.keys(v).value(h.y.getValue.bind(h))(j),o.empty()&&(o=n.append("g").attr("class","data")),b=o.selectAll(".area").data(a,h.z.getId.bind(h)),b.enter().append("path").attr("class",w).attr("d",p),b.transition(r).attr("d",p),b.exit().remove(),c=o.selectAll(".label"),c.data(a).enter().append("text").text(h.z.getText.bind(h)).attr("aria-hidden","true").attr("class","label").attr("fill","#000").attr("x",t).attr("y",u).attr("dy","1em").attr("text-anchor","end"),c.transition(r).attr("y",u),c.exit().remove(),k.empty()&&(k=n.append("g").attr("class","x axis").attr("aria-hidden","true").attr("transform","translate(0,"+l+")"),k.append("text").attr("class","chart-label").attr("fill","#000").attr("x",m).attr("dy","-0.5em").attr("text-anchor","end").text(d.x.label)),k.call(d3.axisBottom(e).ticks(i.x.ticks).tickFormat(h.x.getTickText?h.x.getTickText.bind(h):null)),s.empty()&&(s=n.append("g").attr("class","y axis").attr("aria-hidden","true"),s.append("text").attr("class","chart-label").attr("fill","#000").attr("y","0").attr("transform","rotate(-90)").attr("dy","1.5em").attr("text-anchor","end").text(d.y.label)),s.call(d3.axisLeft(f).ticks(i.y.ticks).tickFormat(h.y.getTickText?h.y.getTickText.bind(h):null))},t=function(){var a,b,d,e,f,g,h=this.settings,i=h.filterData&&"function"==typeof h.filterData?h.filterData(h.data,"table"):h.data,j=c.select(c.classed("svg-shimmed")?function(){return this.parentNode.parentNode}:function(){return this.parentNode}),k=j.select("details"),l=h.z.getKeys.call(h,i);if(k.empty()){for(k=j.append("details").attr("class","chart-data-table"),k.append("summary").attr("id","chrt-dt-tbl").text(h.datatable.title),a=k.append("table").attr("class","table").attr("aria-labelledby","chrt-dt-tbl"),b=a.append("thead").append("tr"),d=a.append("tbody"),b.append("th").text(h.x.label),g=0;g<l.length;g++)b.append("th").text(h.z.getText.bind(h)({key:l[g]}));for(e=d.selectAll("tr").data(i),f=e.enter().append("tr"),f.append("th").text((h.x.getText||h.x.getValue).bind(h)),g=0;g<l.length;g++)f.append("td").text(function(a){return h.y.getText?h.y.getText.call(h,a,l[g]):h.y.getValue.call(h,a,l[g])});$&&$(".chart-data-table summary").trigger("wb-init.wb-details")}},u=function(){o.remove()};return g={settings:i,clear:u,svg:c},c.attr("viewBox","0 0 "+j+" "+k).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",i.altText),n.empty()&&(n=c.append("g").attr("transform","translate("+i.margin.left+","+i.margin.top+")")),h=function(){s.apply(g),!1!==i.datatable&&(t.apply(g),d3.stcExt.addIEShim(c,k,j))},i.data?h():d3.json(i.url,function(a,b){i.data=b,h()}),g}}(jQuery.extend);
//# sourceMappingURL=area.min.js.map