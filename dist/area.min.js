!function(a){var b={margin:{top:15,right:10,bottom:30,left:50},aspectRatio:16/9,x:{ticks:5},y:{ticks:10,totalProperty:"total",getTotal:function(a,b,c){var d,e,f=this;if(!a[f.y.totalProperty]){e=f.z.getKeys.call(f,c),d=0;for(var g=0;g<e.length;g++)d+=f.y.getValue.call(f,a,e[g],c);a[f.y.totalProperty]=d}return a[f.y.totalProperty]}},width:600};this.areaChart=function(c,d,e){var f,g,h,i,j=a(!0,{},b,d),k=j.width,l=Math.ceil(k/j.aspectRatio),m=j.innerHeight=l-j.margin.top-j.margin.bottom,n=j.innerWidth=k-j.margin.left-j.margin.right,o=c.select("g.margin-offset"),p=o.select(".data"),q=d3.area().x(function(a){return f(j.x.getValue(a.data))}).y0(function(a){return g(a[0])}).y1(function(a){return g(a[1])}),r=d3.stack(),s=d3.transition().duration(1e3),t=function(){var a,b,c=this.settings,i=c.filterData&&"function"==typeof c.filterData?c.filterData.call(c,e):e,k=c.z.getKeys.call(c,i),l=r.keys(k).value(c.y.getValue.bind(c))(i),t=o.select(".x.axis"),u=o.select(".y.axis"),v=n-6,w=function(a){return g((a[a.length-1][0]+a[a.length-1][1])/2)},x=function(a,b){var d="area area"+(b+1);return c.z&&c.z.getClass&&"function"==typeof c.z.getClass&&(d+=" "+c.z.getClass.call(c,a)),d};f=h.x=function(){return d3.scaleTime()}().range([0,n]),g=h.y=d3.scaleLinear().range([m,0]),f.domain(d3.extent(i,c.x.getValue.bind(c))),g.domain([0,d3.max(i,c.y.getTotal.bind(c))]),p.empty()&&(p=o.append("g").attr("class","data")),a=p.selectAll(".area").data(l,c.z.getId.bind(c)),a.enter().append("path").attr("class",x).attr("d",q),a.transition(s).attr("d",q),a.exit().remove(),b=p.selectAll(".label"),b.data(l).enter().append("text").text(c.z.getText.bind(c)).attr("aria-hidden","true").attr("class","area-label").attr("fill","#000").attr("x",v).attr("y",w).attr("dy","1em").attr("text-anchor","end"),b.transition(s).attr("y",w),b.exit().remove(),t.empty()?(t=o.append("g").attr("class","x axis").attr("aria-hidden","true").attr("transform","translate(0,"+m+")"),t.append("text").attr("class","chart-label").attr("fill","#000").attr("x",n).attr("dy","-0.5em").attr("text-anchor","end").text(d.x.label)):t.select("text").text(d.x.label),t.call(d3.axisBottom(f).ticks(j.x.ticks).tickFormat(c.x.getTickText?c.x.getTickText.bind(c):null)),u.empty()?(u=o.append("g").attr("class","y axis").attr("aria-hidden","true"),u.append("text").attr("class","chart-label").attr("fill","#000").attr("y","0").attr("dy","-0.5em").attr("text-anchor","start").text(d.y.label)):u.select("text").text(d.y.label),u.call(d3.axisLeft(g).ticks(j.y.ticks).tickFormat(c.y.getTickText?c.y.getTickText.bind(c):null))},u=function(){var a,b,d,f,g,h,i=this.settings,j=i.filterData&&"function"==typeof i.filterData?i.filterData(e,"table"):e,k=c.select(c.classed("svg-shimmed")?function(){return this.parentNode.parentNode}:function(){return this.parentNode}),l=k.select("details"),m=i.z.getKeys.call(i,j);if(l.empty()){for(l=k.append("details").attr("class","chart-data-table"),l.append("summary").attr("id","chrt-dt-tbl").text(i.datatable.title),a=l.append("table").attr("class","table").attr("aria-labelledby","chrt-dt-tbl"),b=a.append("thead").append("tr"),d=a.append("tbody"),b.append("th").text(i.x.label),h=0;h<m.length;h++)b.append("th").text(i.z.getText.bind(i)({key:m[h]}));for(f=d.selectAll("tr").data(j),g=f.enter().append("tr"),g.append("th").text((i.x.getText||i.x.getValue).bind(i)),h=0;h<m.length;h++)g.append("td").text(function(a){return i.y.getText?i.y.getText.call(i,a,m[h]):i.y.getValue.call(i,a,m[h])});($||wb)&&$(".chart-data-table summary").trigger("wb-init.wb-details")}},v=function(){p.remove()};return h={settings:j,clear:v,svg:c},c.attr("viewBox","0 0 "+k+" "+l).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",j.altText),o.empty()&&(o=c.append("g").attr("class","margin-offset").attr("transform","translate("+j.margin.left+","+j.margin.top+")")),i=function(){t.apply(h),d3.stcExt.addIEShim(c,l,k),!1!==j.datatable&&u.apply(h)},void 0===e?d3.json(j.url,function(a,b){e=b,i()}):i(),h}}(jQuery.extend,jQuery);
//# sourceMappingURL=area.min.js.map